@model Etammen.ViewModels.JSONMainViewModelHolder
@using System.Text.Json;
@{

    var myModel = JsonSerializer.Deserialize<MainViewModel>(Model.JSONdata);
}

<div>
    <partial name="Partial/_PartialSearch.cshtml" model="@Model" />
</div>


<div>
    <partial name="Partial/_PartialFilter.cshtml" model="@Model" />
</div>


<div>
    <partial name="Partial/_PartialOrder.cshtml" model="@Model" />
</div>


@for(int i = 0; i < myModel.CurrentPageDoctors.Count; i++)
{
    <div class="doctor-card">
        <div class="doctor-card__image">
            <img src="https://cdn-dr-images.vezeeta.com/Assets/Images/SelfServiceDoctors/ENT5bcb09ffafde1f6f/Profile/150/abdellatif--hamouda-internal-medicine_20220928163418459.jpg" alt="Dr. Abdellatif Hamouda">
        </div>
        <div class="doctor-card__details">
        <a asp-controller="Patient" asp-action="Details" asp-route-id="@doctor.Id">Details</a>

            <h2 class="doctor-card__name">Dr: @myModel.DoctorFullnames[i]</h2>
            <p class="doctor-card__description">Senior Consultant of General Internal Medicine, Gastroenterology, Diabetes and Liver Diseases - Lille II University in France.</p>
            <div class="doctor-card__ratings">
                <div class="star-rating">
                    <span class="filled-star"></span>
                    <span class="filled-star"></span>
                    <span class="filled-star"></span>
                    <span class="filled-star"></span>
                    <span class="half-filled-star"></span>
                </div>
                <span class="rating-count">Overall Rating: 4.5 (669 Visitors)</span>
            </div>
            <div class="doctor-card__specialties">
                <h3 class="specialty-title">Specialized in: </h3>
                <ul class="specialty-list">
                    <li><a href="/en/doctor/gastroenterology-and-endoscopy/egypt">@myModel.CurrentPageDoctors[i].Speciality</a></li>
                    <li><a href="/en/doctor/adult-hepatology/egypt">Adult Hepatology</a></li>
                    <li><a href="/en/doctor/adult-gastroenterology-and-endoscopy/egypt">Adult Gastroenterology and Endoscopy</a></li>
                </ul>
            </div>
            <div class="doctor-card__location">
                @{
                    foreach (var clinic in @myModel.CurrentPageDoctors[i].Clinics)
                    {
                        <span class="clinic-name">@clinic.Name</span>
                        <span class="clinic-fees">@clinic.Fees</span>
                        <span class="clinic-city">@clinic.Address.City</span>
                    }
                }

            </div>
            <div class="doctor-card__contact">
                <a href="tel:16676" class="hotline">fuck you: 16676 (Cost of regular call)</a>
            </div>
        </div>
    </div>
}

<nav aria-label="Page navigation">
    <ul class="pagination">
        @for (var i = 1; i <= ViewBag.TotalPages; i++)
        {
            <li class="page-item @(i == ViewBag.CurrentPage ? "active" : "")">
                <form asp-action="Pagination" id="paginationForm" onsubmit="updateAndSubmit(event,'paginationForm')">
                    <input type="hidden" name="JSONdata" value="@Model.JSONdata" />
                    <input type="hidden" name="pageNumber" value="@i" />
                    <button type="submit" class="page-link">@i</button>
                </form>
            </li>
        }
    </ul>
</nav>



<div>
    <partial name="Partial/_PartialScript.cshtml" model="@Model" />
</div>
