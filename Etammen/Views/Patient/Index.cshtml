@model IEnumerable<GetDoctorByIdViewModel>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}





<div id="paginationDiv">
    <partial name="_Patient" model="Model" />

</div>


<nav aria-label="Page navigation">
    <ul class="pagination">
        @for (var i = 1; i <= ViewBag.TotalPages; i++)
        {
            <li class="page-item @(i == ViewBag.CurrentPage ? "active" : "")">
                <a class="page-link" onclick="nextPage(@i)">@i</a>
            </li>
        }
    </ul>
</nav>



<div class="filter-container">
    <div class="filter-header">Filters</div>
    <div class="filter-content">
        <form id="filterForm" action="/Patient/FilteredDoctors" method="post">


            <div class="filter-item">
                <a id="Degree" class="collapsible-trigger" data-target="title">Degree</a>


                <div class="filter-item">
                    <a id="Degree" class="collapsible-trigger" data-target="title">Degree</a>

                    <div style="display:none" class="collapsible-content" id="title-content">
                        <div class="checkbox">
                            <input type="checkbox" id="title-professor" name="degree" value="Professor">
                            <label for="title-professor">Professor</label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="title-lecturer" name="degree" value="Lecturer">
                            <label for="title-lecturer">Lecturer</label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="title-consultant" name="degree" value="Consultant">
                            <label for="title-consultant">Consultant</label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="title-specialist" name="degree" value="Specialist">
                            <label for="title-specialist">Specialist</label>
                        </div>
                    </div>


                </div>

                <div class="filter-item">
                    <a id="Gender" class="collapsible-trigger" data-target="title">Gender</a>
                    <div style="display:none" class="collapsible-content-gender" id="Title-Gender">
                        <div class="checkbox">
                            <input type="radio" id="title-professor" name="gender" value="0">
                            <label for="title-professor">Male</label>
                        </div>
                        <div class="checkbox">
                            <input type="radio" id="title-lecturer" name="gender" value="1">
                            <label for="title-lecturer">Female</label>
                        </div>
                    </div>
                </div>

                <div class="filter-item">
                    <a id="Fees" class="collapsible-trigger" data-target="title">Fees</a>
                    <div style="display:none" class="collapsible-content-fees" id="title-Fees">
                        <div class="checkbox">
                            <input type="checkbox" id="title-professor" name="fees" value="50">
                            <label for="title-professor">Less than 50</label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="title-lecturer" name="fees" value="100">
                            <label for="title-lecturer">From 50 to 100</label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="title-lecturer" name="fees" value="150">
                            <label for="title-lecturer">From 100 to 200</label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="title-lecturer" name="fees" value="200">
                            <label for="title-lecturer">From 200 to 300</label>
                        </div>

                        <div class="checkbox">
                            <input type="checkbox" id="title-lecturer" name="fees" value="250">
                            <label for="title-lecturer">Greater than 300</label>
                        </div>
                    </div>
                </div>

                <button id="submitBtn">Filter</button>
        </form>
    </div>
</div>



@section PatientHomeJS {
    <script>
        document.getElementById('Degree').addEventListener('click', function () {
            var content = document.getElementById('title-content');
            if (content.style.display === 'none') {
                content.style.display = 'block';
            } else {
                content.style.display = 'none';
            }
        });

        document.getElementById('Gender').addEventListener('click', function () {
            var content = document.getElementById('Title-Gender');
            if (content.style.display === 'none') {
                content.style.display = 'block';
            } else {
                content.style.display = 'none';
            }
        });

        document.getElementById('Fees').addEventListener('click', function () {
            var content = document.getElementById('title-Fees');
            if (content.style.display === 'none') {
                content.style.display = 'block';
            } else {
                content.style.display = 'none';
            }
        });

    </script>
}


<script>
    function nextPage(pagenumber) {

        let gender = $('input[name="gender"]:checked').val();

        var selectedItems = [];
        var checkboxes = document
        .querySelectorAll('input[name="degree"]:checked');
        checkboxes
        .forEach(function (checkbox) {
            selectedItems.push(checkbox.value);
        });


        var selectedItemsTwo = [];
        var checkboxesTwo = document.querySelectorAll('input[name="fees"]:checked');
        checkboxesTwo.forEach(function (checkbox) {
            selectedItemsTwo.push(checkbox.value);
        });


        $.ajax({
            url: "/Patient/GetDoctors",
            type: 'GET',
            data: {
                degrees: selectedItems,
                feess: selectedItemsTwo,
                gender: parseInt(gender),
                pageNumber: pagenumber
            },
            success: function (result) {

                $('#paginationDiv').html(result);

            },
            error: function (xhr, status, error) {
                console.log("Error:", error);
            }
        });


    }
</script>
